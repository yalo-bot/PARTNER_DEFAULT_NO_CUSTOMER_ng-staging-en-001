{
  "_id": "60259e682434f5c11638ffa9",
  "repoId": "PARTNER_DEFAULT_NO_CUSTOMER_ng-staging-en-001",
  "id": 127,
  "type": "step",
  "actions": [
    {
      "source": [
        "-- Get the user's city\n\nlocal city = Context.get('currentMessage')\nContext.set('city', city)\n\n\n-- Invoke webhook to get weather\n\nlocal hook = \"http://api.weatherapi.com/v1/current.json?key=98dde8c07fce46b2843215719212201&q=\"..city\nlocal data = Invoke.webhook(hook, 'GET', '')\n\n\n-- Parse json response for temperature and conditions\n\nlocal temp = data.current.temp_c\nlocal condition = data.current.condition.text\n\n\n-- Variables as strings, and set in the context\n\nContext.set('temp', tostring(temp))\nContext.set('condition', tostring(condition))\n\n\n-- Branch to next step\n\nWorkflow.branch(129)\n"
      ],
      "_id": "6025bf4d2434f570263902a8",
      "id": "3e87d202-64a5-4211-8df8-1e4b1a360306"
    }
  ],
  "reactions": [
    {
      "source": [
        "Template.compile([[What city are you in?]])"
      ],
      "_id": "6025bf4d2434f528313902a7",
      "id": "d3471413-3548-467e-af14-286f55268040"
    }
  ],
  "triggers": [],
  "__v": 0,
  "name": "city"
}